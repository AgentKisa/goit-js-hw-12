{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst pixabayKey = '44070637-4c17cd33bb35071a705149900';\n\nexport async function sendRequest(query, handleResponse, handleError, page, perPage) {\n  try {\n    const { data: response } = await axios.get(`https://pixabay.com/api/`, {\n      params: {\n        key: pixabayKey,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n    handleResponse(response);\n  } catch (error) {\n    handleError(error)\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nconst loadMoreBtn = document.querySelector('.div-load');\nconst loadHolder = document.querySelector('.load-holder');\n\nfunction getLoaderHtml() {\n  return '<div class=\"loader\"></div>';\n}\n\nexport function hideLoader() {\n  loadHolder.innerHTML = '';\n}\n\nexport function showLoader() {\n  loadHolder.innerHTML = getLoaderHtml();\n}\n\nexport function showAlertEmptyInput() {\n  iziToast.warning({\n    title: 'Fill in the search field',\n    position: 'topRight',\n  });\n}\n\nexport function showAlertNotFound() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    position: 'topRight',\n  });\n}\n\nexport function showAlertEndOfSearchResults() {\n  iziToast.warning({\n    title: \"We're sorry, but you've reached the end of search results.\",\n    position: 'topRight',\n  });\n}\n\nexport function getImageHtml(image) {\n  return `\n    <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n      <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"foto\" height=\"148\" width=\"360\">\n      <div class=\"info\" >\n        <p class=\"icon\">Likes: ${image.likes} </p>\n        <p class=\"icon\">Views: ${image.views}</p>\n        <p class=\"icon\">Comments: ${image.comments}</p>\n        <p class=\"icon\">Downloads: ${image.downloads}</p>\n      </div>\n    </a>`;\n}\n\nexport function getImagesHtml(images) {\n  return images.map(getImageHtml).join('');\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('load-more-hidden');\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('load-more-hidden');\n}\n\nexport function smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import * as api from './js/pixabay-api';\nimport * as render from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.div-load');\n\nconst perPage = 15;\n\nlet page;\nlet query;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  if (query === '') {\n    render.showInputNotFound();\n    return;\n  }\n  query = e.target.elements.searchInput.value.trim();\n\n  page = 1; // reset to first page\n  gallery.innerHTML = '';\n\n  render.hideLoadMoreBtn();\n\n  render.showLoader();\n  \n  api.sendRequest(query, handleResponse, handleError, page, perPage);\n}\n\nfunction onLoadMore() {\n  page++;\n\n  render.hideLoadMoreBtn();\n\n  render.showLoader();\n \n  api.sendRequest(query, handleResponse, handleError, page, perPage);\n}\n\nfunction handleResponse(response) {\n  console.log('response', response);\n\n  if (!response || response.totalHits === 0) {\n    render.hideLoader();\n    render.showAlertNotFound();\n    gallery.innerHTML = '';\n    return;\n  }\n  \n  const totalPages = Math.ceil(response.totalHits / perPage);\n  \n  const images = response.hits;\n  const galleryFilling = render.getImagesHtml(images);\n\n  render.hideLoader();\n  gallery.innerHTML += galleryFilling;\n  \n  if (totalPages > page) {\n    render.showLoadMoreBtn();\n  } else {\n    render.showAlertEndOfSearchResults();\n  }\n\n  render.lightbox.refresh();\n\n  if (page != 1) {\n    render.smoothScroll();\n  }\n}\n\nfunction handleError(error) {\n  console.log('error:', error);\n}\n"],"names":["pixabayKey","sendRequest","query","handleResponse","handleError","page","perPage","response","axios","error","lightbox","SimpleLightbox","loadMoreBtn","loadHolder","getLoaderHtml","hideLoader","showLoader","showAlertNotFound","iziToast","showAlertEndOfSearchResults","getImageHtml","image","getImagesHtml","images","hideLoadMoreBtn","showLoadMoreBtn","smoothScroll","cardHeight","form","gallery","onSearch","onLoadMore","render.showInputNotFound","render.hideLoadMoreBtn","render.showLoader","api.sendRequest","render.hideLoader","render.showAlertNotFound","totalPages","galleryFilling","render.getImagesHtml","render.showLoadMoreBtn","render.showAlertEndOfSearchResults","render.lightbox","render.smoothScroll"],"mappings":"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"}